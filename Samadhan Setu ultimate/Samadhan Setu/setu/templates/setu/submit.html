{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Report Grievance | Samadhan Setu</title>
  <link rel="stylesheet" href="{% static 'style/main.css' %}">
  <link rel="stylesheet" href="{% static 'style/responsive.css' %}">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha512-TbaY9R+L... (cut) ..." crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    .progress-bar-outer {
      width: 100%;
      background: #eee;
      border-radius: var(--radius);
      height: 7px;
      margin: 1em 0;
    }
    .progress-bar-inner {
      background: var(--blue);
      width: 0;
      height: 100%;
      transition: width 0.4s;
      border-radius: var(--radius);
    }
    .modal {
      display: none;
      position: fixed;
      left: 0;
      top: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(36, 113, 163, 0.19);
      align-items: center;
      justify-content: center;
      z-index: 99;
    }
    .modal.active {
      display: flex;
    }
    .modal-content {
      background: var(--white);
      border-radius: var(--radius);
      padding: 2em 3em;
      box-shadow: 0 4px 30px #aaa;
      text-align: center;
    }
  </style>
</head>
<body>
<header>
  <nav class="container hellog flex gap-2">
    <div class="logo" style="font-size:1.4em;color:var(--blue);font-weight:bold">Samadhan Setu</div>
    <div class="hellog flex gap-2" style="flex:1">
      <a href="{% url 'home' %}">Home</a>
      <a href="{% url 'about' %}">About</a>
      <a href="{% url 'submit' %}">Report Grievance</a>
      <a href="{% url 'track' %}">Track Status</a>
      <!-- <a href="{% url 'testimonials' %}">Testimonials</a> -->
      <a href="{% url 'faq' %}">FAQ</a>
      <a href="{% url 'contact' %}">Contact</a>
    </div>
  </nav>
</header>

<main class="container" style="max-width:440px;">
  <h1 class="do-center">Report a Grievance</h1>

  <form id="grievanceForm" method="post" action="{% url 'submit_grievance' %}" enctype="multipart/form-data"
      style="background:var(--white);border-radius:var(--radius);box-shadow:0 1px 16px #2471A320;padding:2.5em 1em;margin-bottom:2em;">
    {% csrf_token %}


    <label for="name">Name</label>
    <input required type="text" id="name" name="name">

    <label for="email">Email</label>
    <input required type="email" id="email" name="email">

    <label for="phone">Phone</label>
    <input required type="tel" id="phone" name="phone" pattern="[0-9]{10}" maxlength="10">

    <label for="adhar">Aadhar Number</label>
    <input required type="text" id="adhar" name="adhar">

    <label for="category">Category</label>
    <select required id="category" name="category">
      <option value="">Select Category</option>
      <option>Roads</option>
      <option>Water</option>
      <option>Sanitation</option>
      <option>Electricity</option>
      <option>Healthcare</option>
      <option>Other</option>
    </select>

    <label for="title">Title</label>
    <input required type="text" id="title" name="title" maxlength="200">

    <label for="description">Description</label>
    <textarea required id="message" name="message" rows="4" maxlength="1000"></textarea>


    <label for="location">Location (Manual or Auto)</label>
    <div style="display:flex;gap:0.5em;align-items:center;">
      <input type="text" id="location" name="location" placeholder="Full address" style="flex:1;">
      <button id="autoLocation" type="button">üìç</button>
    </div>

    <label for="image">Image Upload (optional)</label>
    <input type="file" id="image" name="image" accept="image/*">

    <div class="progress-bar-outer">
      <div class="progress-bar-inner" id="formProgress"></div>
    </div>

    <button type="submit" class="btn mt-2">Submit Grievance</button>
  </form>

  <div class="modal" id="confirmModal">
    <div class="modal-content">
      <h2>Grievance Submitted!</h2>
      <p>Thank you for reaching out. Your grievance has been received and will be tracked for swift resolution.</p>
      <a href="{% url 'track' %}" class="btn">Track Status</a>
      <button onclick="document.getElementById('confirmModal').classList.remove('active')" class="btn">Close</button>
    </div>
  </div>
</main>

<footer class="footer container hellog flex gap-2" style="justify-content:space-between;padding:2em 0;">
  <div>
    <strong>Samadhan Setu</strong>
    <address>Office Address - Patna, Bihar</address>
    <a href="mailto:contact@samadhansetu.in">contact@samadhansetu.in</a>
  </div>
  <div class="hellog flex gap-2">
    <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
<a href="#" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
<a href="#" aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
<a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>

  </div>
  <div>¬© 2025 Samadhan Setu. All rights reserved.</div>
</footer>

<script>
  document.getElementById("autoLocation").addEventListener("click", () => {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition((pos) => {
        const { latitude, longitude } = pos.coords;
        document.getElementById("location").value = `${latitude}, ${longitude}`;
      });
    } else {
      alert("Geolocation not supported by your browser.");
    }
  });

  document.getElementById("grievanceForm").addEventListener("submit", function (e) {

    setTimeout(() => {
      document.getElementById("confirmModal").classList.add("active");
    }, 300);
  });
</script>
</body>
</html>
